Implement a PingBudgetManager that balances maximum freshness with strict rate-limit compliance.

WebSocket:
- Respect server-provided pingInterval/pingTimeout.
- Track WS message arrival jitter and local receive timestamps.
- Support multiple WS connections (symbol sharding) to avoid backlog.
- Measure event-loop lag p95/p99 and treat it as data-quality.

REST:
- Implement Adaptive Token Bucket with headroom and priority classes:
  1) Critical: cancel/replace risk actions
  2) High: order placement, stop placement/modification
  3) Medium: positions/orders sync
  4) Low: health sampling (“pings”)
- Default utilization target 70% with 30% headroom.
- On any 429:
  - immediately drop utilization target (e.g., 0.70 → 0.55),
  - exponential backoff for low/medium traffic,
  - preserve critical/high traffic,
  - slow recovery back to 0.70 only after sustained success.
- Provide a unified API:
  - scheduleRestCall(priority, fn)
  - shouldSampleHealth()
  - recordRateLimitEvent()
  - exportMetrics()

Deliver code + tests:
- deterministic token bucket tests
- “never exceed budget” property test
- graceful degradation under repeated 429

